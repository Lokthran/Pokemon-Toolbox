<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pokémon Toolbox</title>
    <style>
        body {
            font-family: sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #333;
            margin: 0;
            padding: 0;
            min-height: 100vh; /* Mindesthöhe des Bodys, um Footer nach unten zu drücken */
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1400px;
            margin: auto;
            padding: 20px;
            flex-grow: 1; /* Lässt den Container den verfügbaren Platz einnehmen */
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 15px;
            margin-bottom: 20px;
            position: relative; /* Für die Positionierung des Spendenaufrufs */
        }

        .header-donation-call {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 0.9em;
        }

        .header-donation-call a {
            background-color: #FF5E5E; /* Auffällige Farbe */
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease;
            white-space: nowrap; /* Verhindert Umbruch des Buttons */
        }

        .header-donation-call a:hover {
            background-color: #E04B4B;
        }


        nav {
            display: flex;
            justify-content: center;
            background-color: white;
            padding: 10px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

            nav button {
                padding: 10px 20px;
                border: none;
                background-color: #f0f0f0;
                cursor: pointer;
                font-size: 1em;
                border-radius: 8px;
                margin: 0 5px;
                transition: background-color 0.3s;
            }

                nav button.active {
                    background-color: #667eea;
                    color: white;
                }

        .view {
            display: none;
            flex-grow: 1; /* Views nehmen den verfügbaren Platz ein */
        }

            .view.active {
                display: block;
            }

        /* Einheitliche Höhe und Ausrichtung für alle Steuerelemente im .controls-Kasten (Desktop) */
        select, input[type="text"], .controls button {
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid #ccc;
            height: 40px; /* Feste Höhe */
            box-sizing: border-box; /* Polsterung in die Höhe einbeziehen */
            font-size: 1em;
            vertical-align: middle;
            margin: 0;
        }

        .progress-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .progress-card {
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            flex-grow: 1; 
            max-width: 48%; 
            min-width: 280px; 
        }

        .progress-section {
            flex-direction: row; 
            justify-content: space-around; 
            align-items: flex-start; 
        }
        
        .progress-bar {
            width: 100%;
            height: 25px;
            background: #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #dee2e6;
        }

        .progress-fill {
            height: 100%;
            text-align: center;
            color: white;
            line-height: 25px;
            font-weight: bold;
            transition: width 0.4s ease-in-out;
        }

        .normal-progress {
            background: linear-gradient(90deg, #4CAF50, #45a049);
        }

        .shiny-progress {
            background: linear-gradient(90deg, #FFD700, #FFA500);
        }

        .controls {
            display: flex;
            flex-wrap: wrap; 
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
        }
        
        .filter-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            flex-grow: 1; 
            align-items: center; 
            justify-content: flex-start; 
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center; 
            justify-content: flex-end; 
        }

        .filter-group select,
        .filter-group input[type="text"] {
            flex-grow: 1; 
            max-width: 200px; 
            min-width: 120px; 
        }
        
        .filter-group #searchFilter {
            max-width: 300px; 
        }

        .button-group button {
            flex-shrink: 0; 
            white-space: nowrap; 
        }

        .generation-section {
            background: white;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .generation-header {
            background: #447D9B;
            color: white;
            padding: 15px;
            font-size: 1.2em;
        }

        .pokemon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap: 15px;
            padding: 15px;
        }

        .pokemon-card {
            background: #fafafa;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #eee;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .pokemon-header {
            display: flex;
            justify-content: space-between;
        }

        .pokemon-name {
            font-weight: bold;
            color: #4CAF50;
        }

        .pokemon-name-wrapper {
            display: flex;
            align-items: center;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .checkbox-container {
            margin-top: auto;
        }

        .pokewiki-link {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            text-decoration: none;
        }

        .form-tag {
            display: inline-block;
            padding: 2px 6px;
            font-size: 0.8em;
            border-radius: 4px;
            color: white;
            margin-left: 8px;
        }

        .form-Alola {
            background-color: #3498db;
        }

        .form-Galar {
            background-color: #e74c3c;
        }

        .form-Hisui {
            background-color: #9b59b6;
        }

        .pokemon-types {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .type-tag {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            color: white;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        .type-normal {
            background-color: #A8A77A;
        }

        .type-feuer {
            background-color: #EE8130;
        }

        .type-wasser {
            background-color: #6390F0;
        }

        .type-pflanze {
            background-color: #7AC74C;
        }

        .type-elektro {
            background-color: #F7D02C;
        }

        .type-eis {
            background-color: #96D9D6;
        }

        .type-kampf {
            background-color: #C22E28;
        }

        .type-gift {
            background-color: #A33EA1;
        }

        .type-boden {
            background-color: #E2BF65;
        }

        .type-flug {
            background-color: #A98FF3;
        }

        .type-psycho {
            background-color: #F95587;
        }

        .type-kaefer {
            background-color: #729F3F;
        }

        .type-gestein {
            background-color: #B6A136;
        }

        .type-geist {
            background-color: #735797;
        }

        .type-drache {
            background-color: #6F35FC;
        }

        .type-unlicht {
            background-color: #705746;
        }

        .type-stahl {
            background-color: #B7B7CE;
        }

        .type-fee {
            background-color: #D685AD;
        }

        #type-calculator-view > .controls {
            flex-direction: column;
            align-items: center;
        }

        .utility-button {
            padding: 8px 15px;
            font-size: 0.9em;
            color: #fff;
            background-color: #6c757d;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 0;
        }

            .utility-button:hover {
                background-color: #5a6268;
            }

        .pokedex-filters {
            display: flex;
            flex-wrap: wrap; 
            gap: 10px;
            align-items: center;
            padding: 15px;
            background-color: #f1f3f5;
            border-bottom: 1px solid #dee2e6;
        }

            .pokedex-filters input,
            .pokedex-filters select { 
                flex-grow: 1; 
                min-width: 120px; 
                max-width: 250px; 
                box-sizing: border-box; 
            }

        .type-selection-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
            margin-bottom: 15px;
        }

            .type-selection-grid .type-tag {
                transition: transform 0.2s, box-shadow 0.2s;
                padding: 8px 12px;
                font-size: 1em;
                font-weight: bold;
            }

                .type-selection-grid .type-tag.selected {
                    transform: scale(1.1);
                    box-shadow: 0 0 10px rgba(0,0,0,0.5);
                }

        #calculator-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .result-column {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
        }

        .effectiveness-group {
            margin-bottom: 10px;
        }

            .effectiveness-group h4 {
                font-size: 0.9em;
                margin: 0 0 8px 0;
                padding-bottom: 5px;
                border-bottom: 1px solid #f0f0f0;
            }

        .pokedex-clickable .pokemon-card {
            cursor: pointer;
            transition: background-color 0.2s;
        }

            .pokedex-clickable .pokemon-card:hover {
                background-color: #e9e9e9;
            }

        .stats-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 8px 12px;
            align-items: center;
        }

        .stat-label {
            font-weight: bold;
            font-size: 0.9em;
        }

        .stat-bar-background {
            background-color: #e9ecef;
            border-radius: 6px;
            height: 18px;
            width: 100%;
            border: 1px solid #dee2e6;
        }

        .stat-bar-fill {
            height: 100%;
            border-radius: 5px;
            background: linear-gradient(90deg, #fd7e14, #ffc107);
            transition: width 0.5s ease-out;
            color: #333;
            font-size: 0.8em;
            line-height: 18px;
            font-weight: bold;
            text-align: center;
            box-sizing: border-box;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-donation-call {
                position: static; /* Positionierung auf Mobilgeräten zurücksetzen */
                text-align: center;
                margin-top: 15px; /* Abstand zum Titel */
            }

            .header-donation-call a {
                display: block; /* Button füllt die Breite aus */
                width: calc(100% - 40px); /* Berücksichtigt Padding des Headers */
                margin: 0 auto; /* Zentriert den Button */
            }

            /* Grundlegende Steuerelemente im Living-Dex (Filter + Buttons) */
            .controls {
                flex-direction: column;
                align-items: stretch; 
                justify-content: flex-start;
            }

            .controls select,
            .controls input {
                width: 100%;
                margin-bottom: 10px;
                max-width: unset; 
                flex-grow: 1;
            }
            
            .controls button {
                width: 100%;
                margin-left: 0;
                margin-top: 10px;
            }

            .filter-group, .button-group {
                flex-direction: column;
                align-items: stretch;
                width: 100%;
                margin-left: 0;
                gap: 10px; 
            }
            
            .filter-group select,
            .filter-group input {
                width: 100%;
                margin-bottom: 10px;
            }

            .button-group button {
                width: 100%;
                margin-top: 10px;
            }

            .pokedex-filters {
                flex-direction: column; 
                align-items: stretch; 
            }

            .pokedex-filters input,
            .pokedex-filters select {
                width: 100%; 
                margin-bottom: 10px;
                flex-shrink: 0; 
                max-width: unset; 
            }

            .type-selection-grid {
                justify-content: center;
            }

            .pokemon-grid {
                grid-template-columns: 1fr;
            }

            .progress-section {
                flex-direction: column;
                align-items: center;
            }

            .progress-card {
                width: 100%;
                max-width: 350px;
                margin-bottom: 15px;
            }
        }
        /* Styles für das Code-Modal */
        #codeModal {
            display: flex; 
        }

        /* Styles für Content-Sektionen (Impressum, Datenschutz) */
        .content-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .content-section h2, .content-section h3, .content-section h4 {
            color: #447D9B;
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        .content-section p, .content-section ul {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        .content-section ul {
            padding-left: 25px;
        }
        .content-section a {
            color: #667eea;
            text-decoration: none;
        }
        .content-section a:hover {
            text-decoration: underline;
        }

        /* Footer für Impressum/Datenschutz-Links */
        .footer-links {
            text-align: center;
            padding: 15px;
            background: #fff;
            border-top: 1px solid #eee;
            margin-top: 20px; /* Abstand zum Inhalt */
            border-radius: 12px;
        }
        .footer-links a {
            color: #667eea;
            text-decoration: none;
            margin: 0 10px;
            font-size: 0.9em;
        }
        .footer-links a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Pokémon Toolbox</h1>
            <div class="header-donation-call">
                <a href="https://ko-fi.com/lokthran" target="_blank" rel="noopener noreferrer">Webseite unterstützen (Spende)</a>
            </div>
        </div>
        <nav>
            <button id="nav-living-dex" class="active">Living-Dex</button>
            <button id="nav-type-calculator">Typen-Rechner</button>
        </nav>
        <div id="living-dex-view" class="view active">
            <div class="progress-section">
                <div class="progress-card"><h3>Normal gefangen</h3><div class="progress-bar"><div class="progress-fill normal-progress" id="normalProgress">0%</div></div><div id="normalStats">0 / 0</div></div>
                <div class="progress-card"><h3>Shiny gefangen</h3><div class="progress-bar"><div class="progress-fill shiny-progress" id="shinyProgress">0%</div></div><div id="shinyStats">0 / 0</div></div>
            </div>
            <div class="controls">
                <div class="filter-group">
                    <select id="genFilter"><option value="all">Alle Generationen</option></select>
                    <select id="formFilter"><option value="all">Alle Formen</option></select>
                    <select id="statusFilter"><option value="all">Alle</option></select>
                    <input type="text" id="searchFilter" placeholder="Nach Name suchen..." />
                </div>
                <div class="button-group">
                    <button id="exportCodeBtn" class="utility-button">Pokémon exportieren</button>
                    <button id="importCodeBtn" class="utility-button">Pokémon importieren</button>
                </div>
            </div>

            <div id="codeModal" style="display:none; position:fixed; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
                <div style="background:white; padding:20px; border-radius:12px; width:80%; max-width:500px; text-align:center;">
                    <h3 id="modalTitle"></h3>
                    <textarea id="codeTextarea" rows="5" style="width:calc(100% - 20px); margin-bottom:10px;"></textarea>
                    <button id="modalActionBtn" class="utility-button"></button>
                    <button id="modalCloseBtn" class="utility-button" style="background-color:#dc3545;">Schließen</button>
                </div>
            </div>

            <div id="pokemonContainer"></div>
        </div>
        <div id="type-calculator-view" class="view">
            <div class="controls">
                <h3>Wähle bis zu zwei Typen zur Verteidigungs-Analyse:</h3>
                <div id="type-selection-grid-container"></div>
                <button id="clear-types-btn" class="utility-button">Auswahl löschen</button>
            </div>
            <div id="calculator-results">
                <div class="result-column"><h3>Defensive</h3><div id="defensive-results"></div></div>
                <div class="result-column"><h3>Offensive</h3><div id="offensive-results"></div></div>
                <div class="result-column" id="stats-container" style="display: none;"><h3>Basis-Stats</h3><div id="stats-display"></div></div>
            </div>
            <div class="generation-section" style="margin-top: 20px;">
                <div class="generation-header">Pokédex (Klicken zum Auswählen)</div>
                <div class="pokedex-filters">
                    <input type="text" id="pokedex-search" placeholder="Namen suchen...">
                    <select id="pokedex-type1-filter"></select>
                    <select id="pokedex-type2-filter"></select>
                </div>
                <div id="pokedex-clickable-container" class="pokedex-clickable pokemon-grid"></div>
            </div>
        </div>

        <div class="view" id="impressum-view">
            <div class="content-section">
                <h2>IMPRESSUM (WORK IN PROGRESS)</h2>
                <h3>Angaben gemäß § 5 TMG:</h3>
                <p>Lokthran<br>
                [Deine Straße und Hausnummer]<br>
                [Deine Postleitzahl] [Dein Ort]<br>
                Deutschland</p>

                <h3>Kontakt:</h3>
                <p>E-Mail: Lokthran@gmail.com</p>

                <h3>Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV:</h3>
                <p>Lokthran<br>
                [Deine Straße und Hausnummer]<br>
                [Deine Postleitzahl] [Dein Ort]<br>
                Deutschland</p>
                
                <h3>Haftung für Inhalte</h3>
                <p>Als Diensteanbieter sind wir gemäß § 7 Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.</p>

                <h3>Haftung für Links</h3>
                <p>Unser Angebot enthält Links zu externen Websites Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb können wir für diese fremden Inhalte auch keine Gewähr übernehmen. Für die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar. Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.</p>

                <h3>Urheberrecht</h3>
                <p>Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht. Die Vervielfältigung, Bearbeitung, Verbreitung und jede Art der Verwertung außerhalb der Grenzen des Urheberrechtes bedürfen der schriftlichen Zustimmung des jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite sind nur für den privaten, nicht kommerziellen Gebrauch gestattet.</p>
                <p>Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte umgehend entfernen.</p>
            </div>
        </div>

        <div class="view" id="datenschutz-view">
            <div class="content-section">
                <h2>Datenschutzerklärung</h2>
                <h3>1. Datenschutz auf einen Blick</h3>
                <h4>Allgemeine Hinweise</h4>
                <p>Die folgenden Hinweise geben einen einfachen Überblick darüber, was mit Ihren personenbezogenen Daten passiert, wenn Sie diese Website besuchen. Personenbezogene Daten sind alle Daten, mit denen Sie persönlich identifiziert werden können. Ausführliche Informationen zum Thema Datenschutz entnehmen Sie unserer unter diesem Text aufgeführten Datenschutzerklärung.</p>

                <h3>2. Allgemeine Hinweise und Pflichtinformationen</h3>
                <h4>Datenschutz</h4>
                <p>Die Betreiber dieser Seiten nehmen den Schutz Ihrer persönlichen Daten sehr ernst. Wir behandeln Ihre personenbezogenen Daten vertraulich und entsprechend der gesetzlichen Datenschutzvorschriften sowie dieser Datenschutzerklärung.</p>
                <p>Wenn Sie diese Website benutzen, werden verschiedene personenbezogene Daten erhoben. Personenbezogene Daten sind Daten, mit denen Sie persönlich identifiziert werden können. Die vorliegende Datenschutzerklärung erläutert, welche Daten wir erheben und wofür wir sie nutzen. Sie erläutert auch, wie und zu welchem Zweck das geschieht.</p>
                <p>Wir weisen darauf hin, dass die Datenübertragung im Internet (z.B. bei der Kommunikation per E-Mail) Sicherheitslücken aufweisen kann. Ein lückenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht möglich.</p>

                <h4>Hinweis zur verantwortlichen Stelle</h4>
                <p>Die verantwortliche Stelle für die Datenverarbeitung auf dieser Website ist:</p>
                <p>Lokthran<br>
                [Deine Straße und Hausnummer]<br>
                [Deine Postleitzahl] [Dein Ort]<br>
                Deutschland</p>
                <p>E-Mail: Lokthran@gmail.com</p>
                <p>Verantwortliche Stelle ist die natürliche oder juristische Person, die allein oder gemeinsam mit anderen über die Zwecke und Mittel der Verarbeitung von personenbezogenen Daten (Namen, E-Mail-Adressen o. Ä.) entscheidet.</p>

                <h3>3. Datenerfassung auf dieser Website</h3>
                <h4>Cookies</h4>
                <p>Unsere Website verwendet keine Cookies. Es werden keine Informationen auf Ihrem Gerät gespeichert, die Ihr Browser beim Besuch unserer Website als "Cookie" verwalten würde.</p>

                <h4>Server-Log-Dateien</h4>
                <p>Der Provider der Seiten erhebt und speichert automatisch Informationen in so genannten Server-Log-Dateien, die Ihr Browser automatisch an uns übermittelt. Dies sind:</p>
                <ul>
                    <li>Browsertyp und Browserversion</li>
                    <li>verwendetes Betriebssystem</li>
                    <li>Referrer URL</li>
                    <li>Hostname des zugreifenden Rechners</li>
                    <li>Uhrzeit der Serveranfrage</li>
                    <li>IP-Adresse</li>
                </ul>
                <p>Eine Zusammenführung dieser Daten mit anderen Datenquellen wird nicht vorgenommen. Die Erfassung dieser Daten erfolgt auf Grundlage von Art. 6 Abs. 1 lit. f DSGVO. Der Websitebetreiber hat ein berechtigtes Interesse an der technisch fehlerfreien Darstellung und der Optimierung seiner Website – hierzu müssen die Server-Log-Files erfasst werden.</p>

                <h4>Datenspeicherung im Local Storage</h4>
                <p>Diese Website verwendet "Local Storage" Ihres Browsers, um Ihren Fortschritt im Living-Dex (welche Pokémon Sie gefangen haben) direkt in Ihrem Browser zu speichern. Diese Daten werden ausschließlich lokal auf Ihrem Gerät gespeichert und nicht an unsere Server oder Dritte übertragen. Die Daten verbleiben auf Ihrem Gerät, bis Sie sie über die Browser-Einstellungen löschen oder die Website-Daten manuell entfernen.</p>

                <h3>4. Plugins und Tools</h3>
                <p>Diese Website verwendet derzeit keine externen Plugins oder Tools, die eine Verbindung zu externen Servern herstellen und dabei personenbezogene Daten verarbeiten könnten (z.B. Google Fonts, Google Maps, Social Media Plugins, Tracking-Tools wie Google Analytics). Alle Funktionen basieren auf lokal geladenem Code und den bereitgestellten Daten.</p>

                <h3>5. Ihre Rechte</h3>
                <h4>Recht auf Auskunft, Sperrung, Löschung</h4>
                <p>Sie haben jederzeit im Rahmen der geltenden gesetzlichen Bestimmungen das Recht auf unentgeltliche Auskunft über Ihre gespeicherten personenbezogenen Daten, deren Herkunft und Empfänger und den Zweck der Datenverarbeitung und ggf. ein Recht auf Berichtigung, Sperrung oder Löschung dieser Daten. Hierzu sowie zu weiteren Fragen zum Thema personenbezogene Daten können Sie sich jederzeit unter der im Impressum angegebenen Adresse an uns wenden.</p>

                <h4>Widerrufsrecht bei Einwilligung zur Datenverarbeitung</h4>
                <p>Viele Datenverarbeitungsvorgänge sind nur mit Ihrer ausdrücklichen Einwilligung möglich. Sie können eine bereits erteilte Einwilligung jederzeit widerrufen. Dazu reicht eine formlose Mitteilung per E-Mail an uns. Die Rechtmäßigkeit der bis zum Widerruf erfolgten Datenverarbeitung bleibt vom Widerruf unberührt.</p>

                <h4>Recht auf Beschwerde bei der zuständigen Aufsichtsbehörde</h4>
                <p>Im Falle datenschutzrechtlicher Verstöße steht dem Betroffenen ein Beschwerderecht bei der zuständigen Aufsichtsbehörde zu. Zuständige Aufsichtsbehörde in datenschutzrechtlichen Fragen ist der Landesdatenschutzbeauftragte des Bundeslandes, in dem unser Unternehmen seinen Sitz hat. Eine Liste der Datenschutzbeauftragten sowie deren Kontaktdaten können folgendem Link entnommen werden: <a href="https://www.bfdi.bund.de/DE/Infothek/Anschriften_Links/anschriften_links-node.html" target="_blank">https://www.bfdi.bund.de/DE/Infothek/Anschriften_Links/anschriften_links-node.html</a>.</p>

                <h3>6. Host (GitHub Pages)</h3>
                <p>Diese Website wird über GitHub Pages gehostet. Wenn Sie unsere Website besuchen, verarbeitet GitHub Daten, um den Dienst bereitzustellen und die Sicherheit zu gewährleisten. Dies kann auch die Speicherung von Server-Log-Dateien umfassen (siehe oben). Weitere Informationen zur Datenverarbeitung durch GitHub finden Sie in der Datenschutzerklärung von GitHub: <a href="https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement" target="_blank">https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement</a>.</p>

                <h3>7. Hinweise zu Inhalten und externen Links</h3>
                <p>Die auf dieser Website dargestellten Medien-Dateien (z.B. Bilder, Grafiken) stammen aus verschiedenen Quellen wie z.B. Nintendo-Pressestellen, Privataufnahmen, offiziellen Websites oder ähnlichen Quellen. Sie dienen ausschließlich zu Referenzzwecken im Kontext dieser Anwendung. Die Rechte der einzelnen Werke liegen bei den entsprechenden Urhebern; wir machen uns diese Werke ausdrücklich nicht zu eigen.</p>
                <p>Wir bemühen uns, alle Inhalte auf dieser Website nach bestem Wissen und Gewissen zu erstellen und zu kontrollieren. Inhalte, die im Verdacht stehen, Urheber-, Verwertungs-, Persönlichkeits- oder sonstige Rechte zu verletzen, können unverzüglich ohne Rücksprache korrigiert bzw. gelöscht werden. Ein Ausschluss einzelner Benutzer behalten wir uns ausdrücklich vor, insbesondere bei missbräuchlicher Nutzung.</p>
                <p>Dieses Angebot enthält Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb können wir für diese fremden Inhalte auch keine Haftung übernehmen. Für die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar. Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.</p>
                <p>Wir weisen darauf hin, dass wir auf allen Eingabeseiten darauf achten, dass kein Material verwendet wird, das Urheberrechten Dritter unterliegt. Es kann aber nicht ausgeschlossen werden, dass von Benutzern dennoch unbefugt Material eingebracht wird, das bestehende Schutzrechte verletzt, und das nicht sofort als solches erkannt wird. Wenn uns eine entsprechende Urheberrechtsverletzung angezeigt wird, wird das betreffende Material umgehend entfernt. Am schnellsten erreichen Sie uns hierfür per E-E-Mail unter Lokthran@gmail.com oder über die im Impressum angegebene Postadresse. Die Nachricht sollte den betroffenen Inhalt genau bezeichnen (bitte immer URL und ggf. konkreten Abschnitt angeben) sowie die Publikation oder Website nennen, aus der das Material unberechtigt übernommen wurde.</p>
                <p>Sollten Inhalte aus dieser Anwendung auf andere Websites kopiert werden, müssen die entsprechenden Lizenzbestimmungen (z.B. Creative Commons Lizenz des Quellmaterials) beachtet werden, einschließlich einer korrekten Namensnennung des Urhebers.</p>
                <p>Hinweis: Diese Pokémon Toolbox ist keine offizielle Pokémon-Website und wird weder von Nintendo noch The Pokémon Company betrieben.</p>
                <p>Pokémon and Pokémon character names are trademarks of Nintendo.</p>
                <p>© 2025 Pokémon. © 1995–2025 Nintendo, Creatures Inc., GAME FREAK inc.</p>
            </div>
        </div>
    </div>

    <div class="footer-links">
        <a href="https://github.com/Lokthran/Pokemon-Toolbox" target="_blank" rel="noopener noreferrer">GitHub Repo</a>
        <a href="#" id="footer-impressum-link">Impressum</a>
        <a href="#" id="footer-datenschutz-link">Datenschutz</a>
    </div>

    <script src="pokedex.js"></script>
    <script src="types.js"></script>
    <script src="stats.js"></script>

    <script>
        // --- Globale Variablen ---
        let caughtPokemon = JSON.parse(localStorage.getItem('caughtPokemon')) || {};
        const allTypes = Object.keys(typeMatchups);
        let selectedTypes = [];

        // --- HILFSFUNKTION FÜR TYP-KLASSENNAMEN ---
        function getTypeClassName(type) {
            return type.toLowerCase().replace('ä', 'ae');
        }

        // --- CORE LOGIC ---
        document.addEventListener("DOMContentLoaded", () => {
            const navLivingDex = document.getElementById('nav-living-dex');
            const navTypeCalc = document.getElementById('nav-type-calculator');
            
            function showView(viewId) {
                // Alle Views ausblenden
                document.querySelectorAll('.view').forEach(v => v.style.display = 'none');
                // Alle Nav-Buttons deaktivieren
                document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
                
                const targetView = document.getElementById(viewId);
                if (targetView) {
                    targetView.style.display = 'block'; // Ziel-View anzeigen
                    // Den passenden Nav-Button aktivieren, wenn er in der Hauptnavigation ist
                    if (viewId === 'living-dex-view') navLivingDex.classList.add('active');
                    else if (viewId === 'type-calculator-view') navTypeCalc.classList.add('active');
                }
            }
            
            navLivingDex.addEventListener('click', () => showView('living-dex-view'));
            navTypeCalc.addEventListener('click', () => showView('type-calculator-view'));

            // Event Listener für Footer-Links
            document.getElementById('footer-impressum-link').addEventListener('click', (event) => {
                event.preventDefault(); // Standardlink-Verhalten verhindern
                showView('impressum-view');
            });
            document.getElementById('footer-datenschutz-link').addEventListener('click', (event) => {
                event.preventDefault(); // Standardlink-Verhalten verhindern
                showView('datenschutz-view');
            });

            initLivingDex();
            initTypeCalculator();
            showView('living-dex-view'); // Start mit Living-Dex
        });

        // --- LIVING DEX FUNCTIONS ---
        function initLivingDex() {
            const genFilter = document.getElementById("genFilter");
            const uniqueGens = [...new Set(pokemonList.map(p => p.generation))].sort((a,b) => a-b);
            genFilter.innerHTML += uniqueGens.map(i => `<option value="${i}">Generation ${i}</option>`).join('');
            const formFilter = document.getElementById("formFilter");
            // Entferne "Mega" aus den Living-Dex-Formfiltern
            const uniqueForms = [...new Set(pokemonList.filter(p => p.form !== 'Mega').map(p => p.form))];
            formFilter.innerHTML += uniqueForms.map(f => `<option value="${f}">${f}</option>`).join('');
            const statusFilter = document.getElementById("statusFilter");
            statusFilter.innerHTML += ['caught', 'shiny', 'missing'].map(s => `<option value="${s}">${{caught:'Gefangen',shiny:'Shiny',missing:'Fehlend'}[s]}</option>`).join('');
            ["genFilter", "statusFilter", "formFilter"].forEach(id => document.getElementById(id).addEventListener("change", applyLivingDexFilters));
            document.getElementById("searchFilter").addEventListener("input", applyLivingDexFilters);
            updateLivingDexProgress();
            applyLivingDexFilters();
        }
        function applyLivingDexFilters() {
            const gen = document.getElementById("genFilter").value;
            const status = document.getElementById("statusFilter").value;
            const search = document.getElementById("searchFilter").value.toLowerCase();
            const form = document.getElementById("formFilter").value;
            
            let filtered = pokemonList.filter(p => {
                // Bedingung: Mega-Entwicklungen IMMER ausschließen
                const isNotMega = p.form !== 'Mega';

                // Überprüfe Generation
                const matchesGen = gen === "all" || p.generation == parseInt(gen);
                
                // Überprüfe Namenssuche
                const matchesSearch = p.name.toLowerCase().includes(search);
                
                // Überprüfe Form: Wenn "all" ausgewählt ist, lasse alle NICHT-Mega-Formen zu. Ansonsten, nur die spezifische Form.
                const matchesForm = (form === "all" || p.form === form);
                
                // Überprüfe Fangstatus
                let matchesStatus = true;
                if (status !== "all") {
                    const isCaught = caughtPokemon[p.id] && caughtPokemon[p.id].normal;
                    const isShiny = caughtPokemon[p.id] && caughtPokemon[p.id].shiny;
                    if (status === "caught") matchesStatus = isCaught;
                    else if (status === "shiny") matchesStatus = isShiny;
                    else if (status === "missing") matchesStatus = !isCaught;
                }
                
                // ALLE Bedingungen müssen erfüllt sein
                return isNotMega && matchesGen && matchesSearch && matchesStatus && matchesForm; 
            });
            renderLivingDex(filtered);
        }
        function renderLivingDex(list) {
            const container = document.getElementById("pokemonContainer");
            container.innerHTML = "";
            const grouped = list.reduce((acc, p) => {
                (acc[p.generation] = acc[p.generation] || []).push(p);
                return acc;
            }, {});
            Object.keys(grouped).sort((a, b) => parseInt(a) - parseInt(b)).forEach(gen => {
                const section = document.createElement("div");
                section.className = "generation-section";
                section.innerHTML = `<div class="generation-header">Generation ${gen}</div>`;
                const grid = document.createElement("div");
                grid.className = "pokemon-grid";
                grouped[gen].forEach(p => {
                    const card = document.createElement("div");
                    card.className = "pokemon-card";
                    const isNormalCaught = caughtPokemon[p.id] && caughtPokemon[p.id].normal;
                    const isShinyCaught = caughtPokemon[p.id] && caughtPokemon[p.id].shiny;
                    let formTag = p.form !== 'Normal' ? `<span class="form-tag form-${p.form}">${p.form}</span>` : '';
                    let typeTags = (p.type || "").split(' ').filter(Boolean).map(t => `<span class="type-tag type-${getTypeClassName(t)}">${t}</span>`).join('');
                    card.innerHTML = `<div class="pokemon-header"><div class="pokemon-name-wrapper"><a class="pokemon-name" href="https://www.pokewiki.de/${encodeURIComponent(p.name)}" target="_blank">${p.name}</a>${formTag}</div><span>#${String(p.base_id).padStart(4, '0')}</span></div><div class="pokemon-types">${typeTags}</div><div class="checkbox-container"><div class="checkbox-group"><input type="checkbox" id="normal-${p.id}" data-id="${p.id}" data-type="normal" ${isNormalCaught ? 'checked' : ''}/><label for="normal-${p.id}">Normal</label></div><div class="checkbox-group"><input type="checkbox" id="shiny-${p.id}" data-id="${p.id}" data-type="shiny" ${isShinyCaught ? 'checked' : ''}/><label for="shiny-${p.id}">Shiny</label></div><a class="pokewiki-link" href="https://www.pokewiki.de/${encodeURIComponent(p.name)}#Fundorte" target="_blank">Fundorte</a></div>`;
                    grid.appendChild(card);
                });
                section.appendChild(grid);
                container.appendChild(section);
            });
            document.querySelectorAll('#living-dex-view .pokemon-card input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', (event) => {
                    const id = parseInt(event.target.dataset.id);
                    const type = event.target.dataset.type;
                    if (!caughtPokemon[id]) caughtPokemon[id] = { normal: false, shiny: false };
                    caughtPokemon[id][type] = event.target.checked;
                    localStorage.setItem('caughtPokemon', JSON.stringify(caughtPokemon));
                    updateLivingDexProgress(); // Update progress bar instantly
                    applyLivingDexFilters(); // Re-apply filters to ensure correct display based on new status
                });
            });
        }
        function updateLivingDexProgress() {
            // Bestimme die Gesamtanzahl der Pokémon im Living-Dex (ohne Mega-Entwicklungen)
            const totalPokemonInLivingDex = pokemonList.filter(p => p.form !== 'Mega').length;

            // Zähle die normal gefangenen Pokémon, die NICHT Mega-Entwicklungen sind
            let normalCount = 0;
            let shinyCount = 0;
            pokemonList.forEach(p => {
                if (p.form !== 'Mega') { // Nur Nicht-Mega-Pokémon berücksichtigen
                    if (caughtPokemon[p.id] && caughtPokemon[p.id].normal) {
                        normalCount++;
                    }
                    if (caughtPokemon[p.id] && caughtPokemon[p.id].shiny) {
                        shinyCount++;
                    }
                }
            });

            // Aktualisiere die Textanzeigen
            document.getElementById("normalStats").textContent = `${normalCount} / ${totalPokemonInLivingDex}`;
            document.getElementById("shinyStats").textContent = `${shinyCount} / ${totalPokemonInLivingDex}`;
            
            // Berechne die Prozentsätze
            const normalPercentage = totalPokemonInLivingDex > 0 ? (normalCount / totalPokemonInLivingDex * 100).toFixed(1) : 0;
            const shinyPercentage = totalPokemonInLivingDex > 0 ? (shinyCount / totalPokemonInLivingDex * 100).toFixed(1) : 0;

            // Aktualisiere die Fortschrittsbalken
            document.getElementById("normalProgress").style.width = `${normalPercentage}%`;
            document.getElementById("normalProgress").textContent = `${normalPercentage}%`;
            document.getElementById("shinyProgress").style.width = `${shinyPercentage}%`;
            document.getElementById("shinyProgress").textContent = `${shinyPercentage}%`;
        }

        // --- IMPORT/EXPORT FUNCTIONS ---
        function openCodeModal(mode) {
            const modal = document.getElementById('codeModal');
            const modalTitle = document.getElementById('modalTitle');
            const codeTextarea = document.getElementById('codeTextarea');
            const modalActionBtn = document.getElementById('modalActionBtn');

            modal.style.display = 'flex'; // Modal anzeigen

            if (mode === 'export') {
                modalTitle.textContent = 'Dein Living-Dex Code';
                codeTextarea.value = exportCaughtPokemon();
                codeTextarea.readOnly = true; // Nur zum Kopieren
                modalActionBtn.textContent = 'Kopieren';
                modalActionBtn.onclick = () => {
                    codeTextarea.select();
                    document.execCommand('copy');
                    modalActionBtn.textContent = 'Kopiert!';
                    setTimeout(() => modalActionBtn.textContent = 'Kopieren', 2000);
                };
            } else if (mode === 'import') {
                modalTitle.textContent = 'Code einfügen';
                codeTextarea.value = '';
                codeTextarea.readOnly = false; // Zum Einfügen
                modalActionBtn.textContent = 'Importieren';
                modalActionBtn.onclick = () => {
                    importCaughtPokemon(codeTextarea.value);
                    modal.style.display = 'none'; // Modal schließen nach Import
                    // Aktualisiere die Anzeige
                    updateLivingDexProgress();
                    applyLivingDexFilters(); 
                };
            }
        }

        function exportCaughtPokemon() {
            // Wir speichern nur die IDs der gefangenen Pokémon und ihren Status
            const simpleCaughtData = {};
            for (const id in caughtPokemon) {
                // Sicherstellen, dass nur IDs aus pokemonList berücksichtigt werden
                const pokemonExistsInList = pokemonList.some(p => p.id === parseInt(id));
                if (pokemonExistsInList && (caughtPokemon[id].normal || caughtPokemon[id].shiny)) {
                    simpleCaughtData[id] = {
                        normal: caughtPokemon[id].normal,
                        shiny: caughtPokemon[id].shiny
                    };
                }
            }
            // JSON.stringify konvertiert das Objekt in einen String
            return JSON.stringify(simpleCaughtData);
        }

        function importCaughtPokemon(code) {
            try {
                const importedData = JSON.parse(code);
                if (typeof importedData !== 'object' || importedData === null) {
                    alert('Ungültiger Code: Das importierte Objekt ist kein gültiges JSON-Objekt.');
                    return;
                }

                // Bestätigungsabfrage vor dem Import
                if (!confirm('Möchtest du deinen aktuellen Fortschritt mit dem importierten Code überschreiben?')) {
                    return; // Import abbrechen
                }

                // Den aktuellen Fortschritt komplett löschen und durch importierte Daten ersetzen
                caughtPokemon = {}; 
                for (const id in importedData) {
                    const pokemonId = parseInt(id);
                    // Zusätzliche Prüfung, ob die ID in unserer pokemonList existiert, um ungültige Daten zu vermeiden
                    if (!isNaN(pokemonId) && pokemonList.some(p => p.id === pokemonId)) { 
                        caughtPokemon[pokemonId] = {
                            normal: !!importedData[id].normal, // !! konvertiert zu echtem Boolean
                            shiny: !!importedData[id].shiny
                        };
                    }
                }
                localStorage.setItem('caughtPokemon', JSON.stringify(caughtPokemon));
                alert('Fortschritt erfolgreich importiert!');
            } catch (e) {
                alert('Fehler beim Importieren des Codes. Bitte stelle sicher, dass es ein gültiger Code ist.');
                console.error('Import-Fehler:', e);
            }
        }

        // --- TYPE CALCULATOR FUNCTIONS ---
        function initTypeCalculator() {
            const gridContainer = document.getElementById('type-selection-grid-container');
            const grid = document.createElement('div');
            grid.className = 'type-selection-grid';
            gridContainer.appendChild(grid);
            allTypes.forEach(type => {
                const typeTag = document.createElement('span');
                typeTag.className = `type-tag type-${getTypeClassName(type)}`;
                typeTag.textContent = type;
                typeTag.dataset.type = type;
                typeTag.addEventListener('click', () => toggleTypeSelection(type));
                grid.appendChild(typeTag);
            });
            document.getElementById('clear-types-btn').addEventListener('click', clearTypeSelection);
            const type1Select = document.getElementById('pokedex-type1-filter');
            const type2Select = document.getElementById('pokedex-type2-filter');
            const allTypeOptions = `<option value="all">Typ 1</option>` + allTypes.map(t => `<option value="${t}">${t}</option>`).join('');
            type1Select.innerHTML = allTypeOptions;
            type2Select.innerHTML = allTypeOptions.replace('Typ 1', 'Typ 2');
            document.getElementById('pokedex-search').addEventListener('input', applyClickablePokedexFilters);
            type1Select.addEventListener('change', applyClickablePokedexFilters);
            type2Select.addEventListener('change', applyClickablePokedexFilters);
            applyClickablePokedexFilters(); // Start mit allen Pokemons
            updateCalculatorResults();
        }
        function toggleTypeSelection(type) {
            const index = selectedTypes.indexOf(type);
            if (index > -1) {
                selectedTypes.splice(index, 1);
            } else if (selectedTypes.length < 2) {
                selectedTypes.push(type);
            }
            updateCalculatorUI();
        }
        function clearTypeSelection() {
            selectedTypes = [];
            updateCalculatorUI();
            clearStatsDisplay();
        }
        function updateCalculatorUI() {
            document.querySelectorAll('.type-selection-grid .type-tag').forEach(tag => {
                tag.classList.toggle('selected', selectedTypes.includes(tag.dataset.type));
            });
            updateCalculatorResults();
        }
        function updateCalculatorResults() {
            const defensiveResults = {};
            if (selectedTypes.length > 0) {
                allTypes.forEach(attackingType => {
                    let finalMultiplier = 1;
                    selectedTypes.forEach(defendingType => {
                        finalMultiplier *= typeMatchups[defendingType]?.[attackingType] ?? 1;
                    });
                    (defensiveResults[finalMultiplier] = defensiveResults[finalMultiplier] || []).push(attackingType);
                });
            }
            renderResults('defensive-results', defensiveResults);

            const offensiveResults = {};
            if (selectedTypes.length > 0) {
                allTypes.forEach(defendingType => {
                    selectedTypes.forEach(attackingType => {
                        const effectiveness = typeMatchups[defendingType]?.[attackingType] ?? 1;
                        if (!offensiveResults[effectiveness]) {
                            offensiveResults[effectiveness] = new Set();
                        }
                        offensiveResults[effectiveness].add(defendingType);
                    });
                });
            }
            renderResults('offensive-results', offensiveResults);
        }
        function renderResults(containerId, results) {
            const container = document.getElementById(containerId);
            container.innerHTML = (Object.keys(results).length === 0 || selectedTypes.length === 0) ? '<p>Wähle Typ(en).</p>' : '';
            if (container.innerHTML !== '') return;
            const isDefensive = containerId === 'defensive-results';
            const textMap = isDefensive
                ? { 4: "Sehr effektiv (x4)", 2: "Sehr effektiv (x2)", 0.5: "Nicht sehr effektiv (x0.5)", 0.25: "Kaum effektiv (x0.25)", 0: "Immun (x0)" }
                : { 2: "Sehr effektiv (x2)", 0.5: "Nicht sehr effektiv (x0.5)", 0: "Keine Wirkung (x0)" };
            const order = isDefensive ? [4, 2, 0.5, 0.25, 0] : [2, 0.5, 0];

            order.forEach(multiplier => {
                const types = results[multiplier] ? Array.from(results[multiplier]).sort() : [];
                if (types.length > 0) {
                    const group = document.createElement('div');
                    group.className = 'effectiveness-group';
                    group.innerHTML = `<h4>${textMap[multiplier]}</h4>`;
                    const typesContainer = document.createElement('div');
                    typesContainer.className = 'pokemon-types';
                    types.forEach(type => {
                        typesContainer.innerHTML += `<span class="type-tag type-${getTypeClassName(type)}">${type}</span>`;
                    });
                    group.appendChild(typesContainer);
                    container.appendChild(group);
                }
            });
        }
        function renderClickablePokedex(list = pokemonList) {
            const container = document.getElementById('pokedex-clickable-container');
            container.innerHTML = '';
            list.forEach(p => {
                const card = document.createElement('div');
                card.className = 'pokemon-card';
                // Hier wurde 'formTag' hinzugefügt, um die Form-Tags auch im Typen-Rechner anzuzeigen
                let formTag = p.form !== 'Normal' ? `<span class="form-tag form-${p.form}">${p.form}</span>` : '';
                let typeTags = (p.type || "").split(' ').filter(Boolean).map(t => `<span class="type-tag type-${getTypeClassName(t)}">${t}</span>`).join('');
                card.innerHTML = `<div class="pokemon-header"><span class="pokemon-name">${p.name}</span>${formTag}<span>#${String(p.base_id).padStart(4, '0')}</span></div><div class="pokemon-types">${typeTags}</div>`;
                card.addEventListener('click', () => {
                    selectedTypes = (p.type || "").split(' ').filter(Boolean);
                    updateCalculatorUI();
                    renderStats(p);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
                container.appendChild(card);
            });
        }
        function applyClickablePokedexFilters() {
            const searchText = document.getElementById('pokedex-search').value.toLowerCase();
            const type1 = document.getElementById('pokedex-type1-filter').value;
            const type2 = document.getElementById('pokedex-type2-filter').value;
            const filteredList = pokemonList.filter(p => {
                const types = (p.type || "").split(' ');
                return p.name.toLowerCase().includes(searchText) && (type1 === 'all' || types.includes(type1)) && (type2 === 'all' || types.includes(type2));
            });
            renderClickablePokedex(filteredList);
        }
        function clearStatsDisplay() {
            document.getElementById('stats-container').style.display = 'none';
        }
        function renderStats(pokemon) {
            const stats = pokemonStats.find(s => s.id === pokemon.id);
            const statsContainer = document.getElementById('stats-container');
            const statsDisplay = document.getElementById('stats-display');
            if (!stats) { clearStatsDisplay(); return; }
            statsContainer.style.display = 'block';
            const maxStatValue = 255;
            statsDisplay.innerHTML = `<div class="stats-grid">
                <span class="stat-label">KP:</span> <div class="stat-bar-background"><div class="stat-bar-fill" style="width:${(stats.hp/maxStatValue)*100}%">${stats.hp}</div></div>
                <span class="stat-label">Angriff:</span> <div class="stat-bar-background"><div class="stat-bar-fill" style="width:${(stats.attack/maxStatValue)*100}%">${stats.attack}</div></div>
                <span class="stat-label">Verteid.:</span> <div class="stat-bar-background"><div class="stat-bar-fill" style="width:${(stats.defense/maxStatValue)*100}%">${stats.defense}</div></div>
                <span class="stat-label">Sp. Ang.:</span> <div class="stat-bar-background"><div class="stat-bar-fill" style="width:${(stats.special_attack/maxStatValue)*100}%">${stats.special_attack}</div></div>
                <span class="stat-label">Sp. Vert.:</span> <div class="stat-bar-background"><div class="stat-bar-fill" style="width:${(stats.special_defense/maxStatValue)*100}%">${stats.special_defense}</div></div>
                <span class="stat-label">Initiative:</span> <div class="stat-bar-background"><div class="stat-bar-fill" style="width:${(stats.speed/maxStatValue)*100}%">${stats.speed}</div></div>
                <span class="stat-label">Gesamt:</span> <span style="font-weight:bold;">${stats.total}</span>
            </div>`;
        }
        // Event Listener für Import/Export Buttons
        document.getElementById('exportCodeBtn').addEventListener('click', () => openCodeModal('export'));
        document.getElementById('importCodeBtn').addEventListener('click', () => openCodeModal('import'));
        document.getElementById('modalCloseBtn').addEventListener('click', () => document.getElementById('codeModal').style.display = 'none');
    </script>
</body>
</html>